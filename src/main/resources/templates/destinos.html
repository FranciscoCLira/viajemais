<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Destinos Disponíveis</title>
    <link rel="stylesheet" th:href="@{/css/estilo.css}">
	<style>
	    /* reduz altura de cada item */
	    .destino {
	      padding: 0.5rem 1rem;
	      margin-bottom: 0.5rem;
	      position: relative;
	    }
	    /* posiciona botões de ação no topo direito do item */
	    .destino .acoes-item {
	      position: absolute;
	      top: 0.5rem;
	      right: 1rem;
	      display: flex;
	      gap: 0.5rem;
	    }
	</style>    
</head>
<body>
<div class="container">
    <!-- Cabeçalho com título à esquerda e botões à direita -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
      <h1 style="margin: 0;">Destinos Disponíveis</h1>
      <div>
        <a th:href="@{/destinos/novo}"
           class="confirmar"
           style="margin-right: 0.5rem;">
          Novo Destino
        </a>
        
          
        <a th:href="@{/categorias}" 
           class="confirmar" 
           style="margin:0 0.5rem;">
           Categorias
        </a>
        
        <!-- Mesma classe do rodapé, garante cor azul idêntica -->
        <button type="button"
                class="botao-voltar"
                onclick="window.location.href='/'">
            Voltar à página inicial
        </button>
      </div>
    </div>
    
    <!-- Lista de destinos -->
    <div th:each="destino : ${destinos}" class="destino">
        <!-- botões de ação no topo do item -->
        <div class="acoes-item">
          <a th:href="@{/destinos/editar/{id}(id=${destino.id})}" class="confirmar" style="padding:0.2rem 0.5rem;font-size:0.8rem;">Editar</a>
          <a th:href="@{/destinos/excluir/{id}(id=${destino.id})}" class="cancelar" style="padding:0.2rem 0.5rem;font-size:0.8rem;"
             onclick="return confirm('Confirma exclusão?');">Excluir</a>
        </div>
        <h2 th:text="${destino.local}">Local</h2>
        
        <p>
            <strong>Categoria:</strong>
            <span th:text="${destino.categoria.nome}">Categoria</span>
        </p>
        <p>
            Preço: R$ 
            <span class="ptbr" th:attr="data-value=${destino.preco}"></span>
            <small> a diária</small>
        </p>
        <img th:src="${destino.imagemUrl}" alt="Imagem do destino">
    </div>

    <!-- Rodapé com os dois botões centralizados -->
    <div style="text-align: center; margin-top: 20px;">
        <button type="button"
                class="botao-voltar"
                style="margin-right: 0.5rem;"
                onclick="window.scrollTo(0,0);">
            Voltar ao início desta página
        </button>
        <button type="button"
                class="botao-voltar"
                onclick="window.location.href='/'">
            Voltar à página inicial
        </button>
    </div>
</div>

<script>
  // formata todo elemento com classe `.ptbr` como número brasileiro
  document.querySelectorAll('.ptbr').forEach(el => {
    const raw = el.getAttribute('data-value');
    const num = parseFloat(raw);
    if (!isNaN(num)) {
      el.textContent = num.toLocaleString('pt-BR', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });
    }
  });
</script>
</body>
</html>
